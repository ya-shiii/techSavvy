import{_ as I}from"./Badge.e05fc69f.js";import{_ as F}from"./NCodeBlock.vue.12f6d4d2.js";import{_ as E}from"./NCheckbox.vue.660c8c34.js";import{_ as L}from"./NTip.vue.d602d31e.js";import{g as W,D as q,aT as A,r as P,aU as G,B as K,o as m,c as h,a1 as z,q as t,t as $,s as w,F as B,b as s,h as H,w as u,a as y,I as U,d as p,j as J,K as O,aV as Q,V as X,l as Y,aa as Z,ab as ee,aW as te,aS as ae}from"./entry.559460ac.js";const se={key:0},oe={p4:"",flex:"~ col gap-1"},ne={class:"text-lg font-medium leading-6"},le=y("p",{op50:""}," The following command will be executed in your terminal: ",-1),re={flex:"~ gap-3",mt2:"","justify-end":""},fe=W({__name:"NpmVersionCheck",props:{packageName:{},options:{},showVersion:{type:Boolean,default:!0}},setup(l){const a=l,e=q(),{info:o,update:i,state:v,processId:k,restart:c}=A(a.packageName,a.options),f=P(!0),_=P(!0),M=G(),x=K();async function C(){const r=await i(async n=>x.start(n));r&&_.value&&M.value.push({id:r,message:`${a.packageName} has been updated. Do you want to restart the Nuxt server now?`}),r&&f.value&&e.push(`/modules/terminals?id=${encodeURIComponent(r)}`)}return(r,n)=>{const N=I,R=F,b=E,S=L,V=J,T=O;return m(),h(B,null,[z(r.$slots,"default",{id:t(k),info:t(o),update:C,state:t(v),restart:t(c)},()=>[t(o)&&r.showVersion?(m(),h("code",se,$(`v${t(o).current}`),1)):w("",!0),t(o)?.latest?(m(),h(B,{key:1},[t(o).needsUpdate?(m(),h("button",{key:0,onClick:n[0]||(n[0]=g=>C())},[s(N,{"bg-green-400:10":"","text-green-400":"",title:"updates available",textContent:"updates available"})])):(m(),H(N,{key:1,"bg-gray-400:10":"","text-gray-400":"",title:"latest",textContent:"latest"}))],64)):w("",!0)]),s(t(x),null,{default:u(({resolve:g,args:j})=>[s(T,{"model-value":!0,onClose:d=>g(!1)},{default:u(()=>[y("div",oe,[y("h3",ne," Update "+$(a.packageName)+"? ",1),le,s(R,{code:j[0],lang:"bash",my3:"",px4:"",py2:"",border:"~ base rounded",lines:!1},null,8,["code"]),s(b,{modelValue:t(f),"onUpdate:modelValue":n[1]||(n[1]=d=>U(f)?f.value=d:null),n:"primary"},{default:u(()=>[p(" Navigate to terminal ")]),_:1},8,["modelValue"]),s(b,{modelValue:t(_),"onUpdate:modelValue":n[2]||(n[2]=d=>U(_)?_.value=d:null),n:"primary"},{default:u(()=>[p(" Restart Nuxt server after update ")]),_:1},8,["modelValue"]),y("div",re,[s(S,{n:"sm purple","flex-auto":"",icon:"carbon-chemistry"},{default:u(()=>[p(" Experimental feature. Please make sure to backup your project first. ")]),_:1}),s(V,{onClick:d=>g(!1)},{default:u(()=>[p(" Cancel ")]),_:2},1032,["onClick"]),s(V,{n:"solid primary",onClick:d=>g(!0)},{default:u(()=>[p(" Update ")]),_:2},1032,["onClick"])])])]),_:2},1032,["onClose"])]),_:1})],64)}}}),D=["pages","meta","components","imports","nuxt-config-schema","@nuxt/devtools","@nuxt/telemetry"];function ue(){return ae("getModulesList",async()=>(await $fetch("https://cdn.jsdelivr.net/npm/@nuxt/modules@latest/modules.json")).filter(a=>!D.includes(a.npm)&&a.compatibility.nuxt.includes("^3")))}function _e(){return Q("installed-modules",()=>{const l=X(),a=ue();return Y(()=>(l.value?._installedModules||[]).map(e=>{if(!e.entryPath)return;const o=e.entryPath&&Z(e.entryPath),i=e.meta?.name?e.meta?.name:e.entryPath?o?ee(e.entryPath):l.value?.rootDir?te(e.entryPath,l.value?.rootDir).path:void 0:void 0,v=l.value?.modules?.includes(i),k=a.value?.find(c=>c.npm===i)||a.value?.find(c=>c.name===i);return{name:i,isPackageModule:o,isUninstallable:v,info:k,...e}}).filter(e=>e&&(!e.name||!D.includes(e.name))))})}export{fe as _,ue as a,_e as u};
